<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
<head>
    <meta charset="UTF-8">
    <title>Student</title>
    <script src="show.js"></script>
</head>
<body>
<div style="background-color: azure">
    <h1 style="text-align: center">Student</h1>
    <div style="text-align: right; margin-right: 50px " id="result1"></div>
</div>
<div style="background-color: #eaeaea;height: 55px">
    <ul class="nav justify-content-center" style="font-size: 25px">
        <li class="nav-item">
            <a class="nav-link" href="#" onclick="showTuitionFeeTable()">TuitionFee</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#"></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#" onclick="showGradeTable()">Grade</a>
        </li>
    </ul>
</div>
<div id="result"></div>
<br><br>

</body>
<script type="text/javascript">
    $(document).ready(function (){
        let avatar = window.sessionStorage.getItem('AVATAR_KEY');
        viewAccount(avatar);
        let name = window.sessionStorage.getItem('NAME_KEY')
        document.getElementById("name").innerHTML=name;

        let roles= JSON.parse(window.sessionStorage.getItem('ROLE_KEY'));
        if (roles===null){
            window.location.href = 'login.html';
        }
        for (let i = 0; i < roles.length; i++) {
            if (roles[i].authority!=='STUDENT'){
                window.location.href = 'login.html';
                return
            }
        }
    })

    function showTuitionFeeTable(){
        event.preventDefault()
        let id = window.sessionStorage.getItem('ID_KEY');
        $.ajax({
            url: 'http://localhost:8080/tuitionFee/findAllByUsersId/'+id,
            type: "GET",
            success: function (data) {
                let result =
                    `
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">STT</th>
                            <th scope="col">DotDog</th>
                            <th scope="col">DayDog</th>
                            <th scope="col">Status</th>
                            <th scope="col">Money</th>
                        </tr>
                        </thead>
                        <tbody>
                    `;
                $.each(data,function (index,value){
                    result +=
                        `<tr>
                            <th scope="row">${index+1}</th>
                            <td>${value.dotDog}</td>
                            <td>${value.dayDog}</td>
                            <td>${value.status}</td>
                            <td>${index.money}</td>
                        </tr>`
                })
                result+=`</tbody>
                    </table>`;
                document.getElementById("result").innerHTML = result;
            }
        })
    }

    function showGradeTable(){
        event.preventDefault()
        let id = window.sessionStorage.getItem('ID_KEY');
        $.ajax({
            url: 'http://localhost:8080/grade/findAllByUsersId/'+id,
            type: "GET",
            success: function (data) {
                let result =
                    `
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">STT</th>
                            <th scope="col">Subject</th>
                            <th scope="col">Module</th>
                            <th scope="col">Theory</th>
                            <th scope="col">Practice</th>
                            <th scope="col">Average</th>
                        </tr>
                        </thead>
                        <tbody>
                    `;
                $.each(data,function (index,value){
                    result +=
                       `<tr>
                        <th scope="row">${index+1}</th>
                        <td>${value.subject.name}</td>
                        <td>${value.exam}</td>
                        <td>${value.theory}</td>
                        <td>${value.practice}</td>
                        <td>${value.average}</td>
                       </tr>`
                })
                result+=`</tbody>
                    </table>`;
                document.getElementById("result").innerHTML = result;
            }
        })
    }


    function logOut(){
        event.preventDefault()
        logOutConfirm()
    }
</script>
</html>